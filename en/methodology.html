<!DOCTYPE html>
<html lang="en">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NTCJTDPSJL"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag("js", new Date());
  gtag("config", "G-NTCJTDPSJL");
</script>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>Technical Note ‚Äî Forecast Model ‚Äî BestDateWeather</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=DM+Sans:wght@400;500;600;700&display=swap');
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
body{font-family:"DM Sans",sans-serif;background:#faf8f3;color:#2d3748;min-height:100vh}
.page{max-width:820px;margin:0 auto;padding:40px 24px 80px}
.back{display:inline-flex;align-items:center;gap:8px;font-size:13px;font-weight:600;color:#e8940a;text-decoration:none;margin-bottom:32px;padding:8px 14px;background:white;border-radius:10px;box-shadow:0 2px 8px rgba(26,31,46,.08)}
.back:hover{background:#fff8ee}
.doc-header{background:linear-gradient(135deg,#1a1f2e,#2d3748);border-radius:20px;padding:36px 32px;color:white;margin-bottom:32px;box-shadow:0 8px 32px rgba(26,31,46,.2);border-top:4px solid #e8940a}
.doc-title{font-family:"Playfair Display",serif;font-size:28px;font-weight:900;letter-spacing:-.5px;margin-bottom:6px}
.doc-subtitle{font-size:15px;opacity:.7;font-weight:500}
.doc-date{font-size:12px;opacity:.45;margin-top:8px;font-weight:500}
.callout{display:flex;gap:0;border-radius:12px;overflow:hidden;margin:20px 0;box-shadow:0 2px 8px rgba(26,31,46,.07)}
.callout-ico{background:#e8940a;color:white;font-size:18px;display:flex;align-items:center;justify-content:center;padding:0 16px;min-width:48px}
.callout-body{background:#fff8ee;padding:14px 16px;font-size:14px;line-height:1.7;color:#2d3748;font-weight:500}
.callout.info .callout-ico{background:#3b82f6}.callout.info .callout-body{background:#eff6ff}
.callout.warn .callout-ico{background:#ef4444}.callout.warn .callout-body{background:#fef2f2}

h2{font-family:"Playfair Display",serif;font-size:20px;font-weight:700;color:#1a1f2e;margin:36px 0 12px;padding-bottom:8px;border-bottom:3px solid #e8940a}
h3{font-size:15px;font-weight:700;color:#e8940a;margin:24px 0 8px}
p{font-size:14px;line-height:1.8;color:#4a5568;margin:8px 0}
ul{margin:8px 0 8px 20px}
ul li{font-size:14px;line-height:1.8;color:#4a5568;margin:4px 0}
table{width:100%;border-collapse:collapse;margin:16px 0;font-size:13px;border-radius:10px;overflow:hidden;box-shadow:0 2px 8px rgba(26,31,46,.06)}
thead tr{background:#1a1f2e;color:white}
thead th{padding:11px 14px;text-align:left;font-weight:700;font-size:12px}
tbody tr:nth-child(odd){background:#fff}
tbody tr:nth-child(even){background:#faf8f3}
tbody td{padding:10px 14px;color:#4a5568;font-size:13px;vertical-align:top;border-bottom:1px solid #e8e0d4}
tbody td:first-child{font-weight:700;color:#1a1f2e}
.section-card{background:white;border-radius:16px;padding:24px 28px;margin-bottom:20px;box-shadow:0 2px 12px rgba(26,31,46,.06);border-left:4px solid #e8940a}
code{background:#f7f0e3;color:#c2720a;padding:2px 7px;border-radius:5px;font-size:12px;font-family:monospace}
.badge{display:inline-block;padding:3px 10px;border-radius:20px;font-size:11px;font-weight:700;margin-right:4px}
.badge-blue{background:#dbeafe;color:#1e40af}
.badge-green{background:#d1fae5;color:#065f46}
.badge-gray{background:#f1f5f9;color:#475569}
.badge-upd{background:#fef9c3;color:#854d0e;font-size:10px;vertical-align:middle;margin-left:6px;padding:2px 8px}
.footer-note{text-align:center;font-size:12px;color:#a0aec0;margin-top:48px;padding-top:24px;border-top:1px solid #e8e0d4}
</style>
<link rel="icon" type="image/x-icon" href="favicon.ico"/><link rel="icon" type="image/svg+xml" href="favicon.svg"/><link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png"/><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"/><meta name="theme-color" content="#1a1f2e"/></head>
<body>
<div class="page">
<a class="back" href="app.html">&#8592; Back to the app</a>
<div class="doc-header">
  <div class="doc-title">Weather Forecast Model</div>
  <div class="doc-subtitle">Technical Note ‚Äî Architecture & How It Works</div>
  <div class="doc-date">February 2026</div>
</div>

<div class="callout info">
  <div class="callout-ico">&#x2139;</div>
  <div class="callout-body">The model combines three data sources depending on the time horizon: real forecasts (D+0‚ÄìD+7), ECMWF correction (D+8‚ÄìD+210), pure climatology beyond that. Sunrise/sunset and moon phase are calculated client-side in local time.</div>
</div>

<h2>1. Three-Level Architecture</h2>
<div class="section-card">
<table>
  <thead><tr><th>Level</th><th>Horizon</th><th>Source</th><th>Badge shown</th></tr></thead>
  <tbody>
    <tr><td>1 ‚Äî Live</td><td>D+0 to D+7</td><td>Open-Meteo Forecast</td><td><span class="badge badge-green">Live weather forecast</span></td></tr>
    <tr><td>2 ‚Äî Hybrid</td><td>D+8 to D+210</td><td>Climatology + ECMWF SEAS5/EC46</td><td><span class="badge badge-blue">Seasonal trend</span></td></tr>
    <tr><td>3 ‚Äî Climatology</td><td>Beyond D+210</td><td>Open-Meteo Archive</td><td><span class="badge badge-gray">Historical climate profile</span></td></tr>
  </tbody>
</table>
<p>The button label and badge in the result card adapt automatically depending on the active level.</p>
</div>

<h2>2. Level 1 ‚Äî Live Forecasts (D+0 to D+7)</h2>
<div class="section-card">
<p>Hourly deterministic numerical forecasts via the Open-Meteo Forecast API (<code>api.open-meteo.com</code>).</p>
<h3>Variables restitu√©es</h3>
<table>
  <thead><tr><th>Variable</th><th>API Parameter</th></tr></thead>
  <tbody>
    <tr><td>Temperature 2m</td><td><code>temperature_2m</code></td></tr>
    <tr><td>Precipitation probability</td><td><code>precipitation_probability</code></td></tr>
    <tr><td>Wind speed 10m</td><td><code>windspeed_10m</code></td></tr>
    <tr><td>Solar radiation</td><td><code>shortwave_radiation</code> (W/m¬≤)</td></tr>
    <tr><td>Timezone offset</td><td><code>utc_offset_seconds</code> (for local time)</td></tr>
  </tbody>
</table>
<p>Extreme scenarios are not shown at this level. The D+7 limit reflects the practical degradation of deterministic models ‚Äî beyond this, reliability drops from ~90% to ~50%.</p>
</div>

<h2>3. Level 2 ‚Äî Hybrid Model (D+8 to D+210)</h2>
<div class="section-card">
<h3>3.1 Climatological Base</h3>
<p>For each hour, the model queries the archive over 10 days around the target date, for the last 10 years (~200 data points per hour). Percentiles P25, P50, P75 calculated for temperature and radiation. Rain probability = ratio of occurrences > 0.1 mm.</p>
<h3>3.2 Climate Trend Correction</h3>
<p>Linear correction of <strong>+0.03¬∞C/year</strong> (IPCC AR6 consensus), proportional to the number of years between the requested date and today.</p>
<h3>3.3 ECMWF Seasonal Correction</h3>
<p>Open-Meteo Seasonal API: ECMWF SEAS5 + EC46, 51 members, 36 km resolution.</p>
<table>
  <thead><tr><th>Variable</th><th>Formula</th></tr></thead>
  <tbody>
    <tr><td>Temperature</td><td><code>T_corr = T_hist + (SEAS_mean ‚àí Hist_mean)</code></td></tr>
    <tr><td>T uncertainty</td><td><code>Ratio = SEAS_spread / Hist_spread (cap 0,3‚Äì2,5)</code></td></tr>
    <tr><td>Rain</td><td><code>P_corr = 60% √ó P_hist + 40% √ó SEAS_prob</code></td></tr>
    <tr><td>Wind</td><td><code>W_corr = W_hist + (SEAS_mean ‚àí Hist_mean)</code></td></tr>
  </tbody>
</table>
<h3>3.4 Deterministic Scenarios</h3>
<p>The two scenarios (pessimistic / optimistic) are generated with a <strong>seeded pseudo-random generator</strong> based on the lat/lon/year/month/day combination. Two requests for the same date always produce identical results.</p>
</div>

<h2>4. Level 3 ‚Äî Pure Climatology (> D+210)</h2>
<div class="section-card">
<p>10-year percentile statistics, with +0.03¬∞C/year trend correction only. No ECMWF correction beyond the seasonal horizon.</p>
</div>

<h2>5. Project Weather Score</h2>
<div class="section-card">
<p>Score 0‚Äì100 calculated according to the selected use case. Displayed by default in "Just weather" mode (neutral weighting). Recalculated <strong>instantly</strong> when the use case changes, without a new API call.</p>

<h3>Weights by use case</h3>
<table>
  <thead><tr><th>Criterion</th><th>General weather</th><th>Wedding</th><th>Travel</th><th>Festival</th><th>Outdoor</th><th>Construction</th></tr></thead>
  <tbody>
    <tr><td>Rain</td><td>35%</td><td>40%</td><td><strong>45%</strong></td><td>35%</td><td>25%</td><td>40%</td></tr>
    <tr><td>Temperature</td><td>25%</td><td>30%</td><td>25%</td><td>25%</td><td>20%</td><td>15%</td></tr>
    <tr><td>Wind</td><td>20%</td><td>20%</td><td><strong>10%</strong></td><td>25%</td><td>15%</td><td>25%</td></tr>
    <tr><td>Sun</td><td>20%</td><td>10%</td><td><strong>20%</strong></td><td>15%</td><td>40%</td><td>20%</td></tr>
  </tbody>
</table>

<h3>Ideal temperature ranges</h3>
<table>
  <thead><tr><th>Use case</th><th>Min temp.</th><th>Max temp.</th></tr></thead>
  <tbody>
    <tr><td>General weather</td><td>16¬∞C</td><td>28¬∞C</td></tr>
    <tr><td>Wedding</td><td>16¬∞C</td><td>28¬∞C</td></tr>
    <tr><td>Travel</td><td><strong>10¬∞C</strong></td><td>32¬∞C</td></tr>
    <tr><td>Festival</td><td>14¬∞C</td><td>30¬∞C</td></tr>
    <tr><td>Outdoor</td><td>8¬∞C</td><td>26¬∞C</td></tr>
    <tr><td>Construction</td><td>5¬∞C</td><td>32¬∞C</td></tr>
  </tbody>
</table>

<h3>Verdicts and thresholds</h3>
<p>When rain probability is dominant, the verdict primarily reflects weather reality:</p>
<table>
  <thead><tr><th>Avg rain</th><th>Score</th><th>Verdict</th></tr></thead>
  <tbody>
    <tr><td>&gt; 70%</td><td>‚Äî</td><td>Very rainy day</td></tr>
    <tr><td>45‚Äì70%</td><td>‚â• 75</td><td>Rainy day ‚Äî acceptable conditions</td></tr>
    <tr><td>45‚Äì70%</td><td>&lt; 75</td><td>Rainy day</td></tr>
    <tr><td>30‚Äì45%</td><td>‚â• 78</td><td>Good conditions ‚Äî showers possible</td></tr>
    <tr><td>30‚Äì45%</td><td>60‚Äì77</td><td>Mixed conditions ‚Äî showers possible</td></tr>
    <tr><td>&lt; 30%</td><td>‚â• 85</td><td>Excellent conditions</td></tr>
    <tr><td>&lt; 30%</td><td>70‚Äì84</td><td>Good conditions</td></tr>
    <tr><td>&lt; 30%</td><td>55‚Äì69</td><td>Acceptable conditions</td></tr>
    <tr><td>&lt; 30%</td><td>40‚Äì54</td><td>Mixed conditions</td></tr>
    <tr><td>&lt; 30%</td><td>&lt; 40</td><td>Difficult conditions</td></tr>
  </tbody>
</table>
</div>

<h2>6. Annual 12-Month View</h2>
<div class="section-card">
<p>Monthly climate profile for comparing seasons at a destination. Archive query covering the <strong>last 3 complete years</strong>, aggregated by month. No ECMWF correction.</p>

<h3>Monthly indicators</h3>
<ul>
  <li><strong>Rain %</strong>: ratio of days > 1 mm/day</li>
  <li><strong>mm/day</strong>: average daily total ‚Äî contextualises rain (2 mm/day tropical shower ‚â† 15 mm/day grey day)</li>
  <li><strong>Sunshine</strong>: <code>sunHrs ‚âà rad_MJ/m¬≤ / 3.6</code> (capped at 14h)</li>
  <li><strong>Weather icon</strong>: based on <strong>mm/day intensity</strong> (not frequency %) and sunshine hours</li>
</ul>

<h3>Monthly icon logic</h3>
<table>
  <thead><tr><th>Rain intensity</th><th>Sunshine</th><th>Icon</th></tr></thead>
  <tbody>
    <tr><td>&lt; 3 mm/j</td><td>‚â• 7h</td><td>‚òÄÔ∏è Sunny</td></tr>
    <tr><td>&lt; 5 mm/j</td><td>‚â• 6h</td><td>‚òÄÔ∏è Sunny</td></tr>
    <tr><td>tout</td><td>‚â• 5h</td><td>‚õÖ Cloudy/showers</td></tr>
    <tr><td>&lt; 3 mm/j</td><td>&lt; 5h</td><td>‚òÅÔ∏è Overcast</td></tr>
    <tr><td>3‚Äì8 mm/j</td><td>&lt; 5h</td><td>‚òÅÔ∏è Overcast</td></tr>
    <tr><td>&gt; 8 mm/j</td><td>&lt; 5h</td><td>üåßÔ∏è Rain</td></tr>
  </tbody>
</table>

<h3>Recommendation badges</h3>
<p>Active only when a use case other than "Just weather" is selected:</p>
<ul>
  <li><span style="color:#1a7a4a;font-weight:700">‚óè Recommended</span>: top 1‚Äì2 months AND score ‚â• 55</li>
  <li><span style="color:#f59e0b;font-weight:700">‚óè Less favourable</span>: bottom 1‚Äì2 months AND score < 50</li>
  <li>If all months score > 50 (e.g. Marrakech): no "Less favourable" badge ‚Äî the destination is broadly good year-round</li>
</ul>
</div>

<h2>7. Astronomical Calculations</h2>
<div class="section-card">
<p>Sunrise/sunset: USNO algorithm, accuracy ¬±5 min (latitudes 60¬∞S‚Äì72¬∞N). <strong>Displayed in local time</strong> via <code>utc_offset_seconds</code> returned by the Open-Meteo API. Dynamic label: "Sunrise (UTC+1)", "Sunrise (UTC+9)", etc.</p>
<p>Moon phase: new moon reference of <strong>17 January 2026 at 00:54 UTC</strong>, synodic period 29.53058867 days. 8 phases returned.</p>
</div>

<h2>8. Limitations</h2>
<div class="callout warn">
  <div class="callout-ico">&#x26A0;</div>
  <div class="callout-body">
    <ul style="margin-left:16px">
      <li>Beyond 14 days: the atmosphere is chaotic. Seasonal forecasts indicate anomalies (warmer/drier than normal), not the weather for a specific day.</li>
      <li>3-year annual view: an atypical year can skew averages. Standard climatology requires 30 years.</li>
      <li>Uniform +0.03¬∞C/year trend correction ‚Äî no regional differentiation.</li>
      <li>Monthly icons: if sunshine ‚â• 5h, the rain icon is never shown ‚Äî a deliberate choice to reflect the feel of tropical regions (short showers + sun), but may understate rain for some temperate climates.</li>
      <li>The project score is a decision-support tool, not a contractual guarantee.</li>
      <li>Sunrise/sunset timezone offset: accurate for dates in the forecast window (D+0‚ÄìD+7). For distant dates, the offset is that of the last archive request.</li>
    </ul>
  </div>
</div>

<h2>9. Sources</h2>
<div class="section-card">
<table>
  <thead><tr><th>Source</th><th>Usage</th><th>Endpoint</th></tr></thead>
  <tbody>
    <tr><td>Open-Meteo Archive</td><td>10-year history + 3-year annual view</td><td><code>archive-api.open-meteo.com</code></td></tr>
    <tr><td>Open-Meteo Forecast</td><td>Forecasts D+0 to D+7 + UTC offset</td><td><code>api.open-meteo.com</code></td></tr>
    <tr><td>Open-Meteo Seasonal</td><td>ECMWF SEAS5 / EC46</td><td><code>seasonal-api.open-meteo.com</code></td></tr>
    <tr><td>Open-Meteo Geocoding</td><td>City geolocation</td><td><code>geocoding-api.open-meteo.com</code></td></tr>
    <tr><td>USNO Solar Algorithm</td><td>Sunrise/sunset</td><td>edwilliams.org</td></tr>
  </tbody>
</table>
</div>

<div class="footer-note">Note technique ¬∑ BestDateWeather ¬∑ February 2026</div>
</div>
</body>
</html>
